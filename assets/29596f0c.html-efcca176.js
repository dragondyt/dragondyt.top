import{_ as a,o as i,c as s,e}from"./app-5de3c553.js";const t={},n=e(`<h2 id="安装elasticsearch-简称es" tabindex="-1"><a class="header-anchor" href="#安装elasticsearch-简称es" aria-hidden="true">#</a> 安装elasticsearch（简称es）</h2><p>拉取镜像，该命令拉取最新版（不推荐，最新版意味着踩坑）</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><div class="code-container"><table><tr><td data-num="1"></td><td><pre>docker pull elasticsearch</pre></td></tr></table><div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div></div></figure><p>可以指定版本，查看<a href="https://hub.docker.com/_/elasticsearch" target="_blank" rel="noopener noreferrer">elasticsearch</a>版本</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><div class="code-container"><table><tr><td data-num="1"></td><td><pre>docker pull elasticsearch:x.x.x</pre></td></tr></table><div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div></div></figure><p><img src="https://i.loli.net/2020/04/28/xIZKV5LsY16oDyO.png" alt="执行docker pull elasticsearch"><br> 尝试运行</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><div class="code-container"><table><tr><td data-num="1"></td><td><pre>docker run --name elasticsearch -d -e ES_JAVA_OPTS=&quot;-Xms512m -Xmx512m&quot; -p 9200:9200 -p 9300:9300 elasticsearch:latest</pre></td></tr></table><div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div></div></figure><p><img src="https://i.loli.net/2020/04/29/fPN3OEz4Qno12b9.png" alt="response from daemon: Conflict. The container name &quot;/elasticsearch&quot; is already in use by container &quot;06a80d721428c762abcb750f5a5f48a947c4714e3f9e6637e10792b4f4fa5a02&quot;. You have to remove (or rename) that container to be able to reuse that name"><br> 查看所有容器</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><div class="code-container"><table><tr><td data-num="1"></td><td><pre>docker ps -a</pre></td></tr></table><div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div></div></figure><p>解决方法</p><ol><li>删除容器，重新创建</li></ol><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><div class="code-container"><table><tr><td data-num="1"></td><td><pre>docker rm containerId|names</pre></td></tr></table><div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div></div></figure><p><img src="https://i.loli.net/2020/04/29/lfQk1gjGZtdcmR6.png" alt="image.png"><br> 发送GET请求，校验是否安装成功</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><div class="code-container"><table><tr><td data-num="1"></td><td><pre>curl localhost:9200</pre></td></tr></table><div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div></div></figure><p><img src="https://i.loli.net/2020/04/29/fgC7MHy3569aQh2.png" alt="curl localhost:9200"><br> 2. 重新启动之前的容器</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><div class="code-container"><table><tr><td data-num="1"></td><td><pre>docker start containerId|names</pre></td></tr></table><div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div></div></figure><h2 id="安装可视化控件-kibana-elasticsearch-head" tabindex="-1"><a class="header-anchor" href="#安装可视化控件-kibana-elasticsearch-head" aria-hidden="true">#</a> 安装可视化控件（kibana，elasticsearch-head…）</h2><p>这里选择kibana，颜值就是正义，在docker中安装kibana<a href="https://www.elastic.co/guide/cn/kibana/current/docker.html" target="_blank" rel="noopener noreferrer">官方文档</a></p><p>需要指定版本，该版本与es一致</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><div class="code-container"><table><tr><td data-num="1"></td><td><pre>docker pull docker.elastic.co/kibana/kibana:7.6.2</pre></td></tr></table><div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div></div></figure><p><img src="https://i.loli.net/2020/04/29/ouJnFqjbIe2OYpX.png" alt=" response from daemon: manifest for docker.elastic.co/kibana/kibana:latest not found: manifest unknown: manifest unknown
"><br> 运行kibana</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><div class="code-container"><table><tr><td data-num="1"></td><td><pre>docker run --link elasticsearch:elasticsearch -p 5601:5601 --name kibana -d docker.elastic.co/kibana/kibana:7.6.2</pre></td></tr></table><div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div></div></figure><p>测试</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><div class="code-container"><table><tr><td data-num="1"></td><td><pre> curl localhost:5601/status</pre></td></tr></table><div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div></div></figure><p>出现kibana server is not ready yet<br> 查看日志</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><div class="code-container"><table><tr><td data-num="1"></td><td><pre>docker logs -f containerId</pre></td></tr></table><div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div></div></figure><p><img src="https://i.loli.net/2020/04/29/jTbGMCAv8UVYpqP.png" alt="image.png"><br> 完了掉坑里了，下次再写了顺便补上docker-compose部署</p>`,27),c=[n];function l(r,p){return i(),s("div",null,c)}const o=a(t,[["render",l],["__file","29596f0c.html.vue"]]);export{o as default};
